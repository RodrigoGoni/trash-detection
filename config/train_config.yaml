# Object Detection Training Configuration

# Experiment settings
experiment:
  name: "taco_detection_baseline"
  tags:
    - "baseline"
    - "faster_rcnn"
    - "resnet50"
  description: "Faster R-CNN baseline for TACO object detection"

# Data settings
data:
  processed_dir: "./data/processed"
  batch_size: 8
  num_workers: 4
  img_size: 640
  dataset_version: "v1.0"  # Track dataset version
  
  # Preprocessing parameters (will be logged to MLflow)
  preprocessing:
    normalize: true
    mean: [0.485, 0.456, 0.406]
    std: [0.229, 0.224, 0.225]
    bbox_format: "pascal_voc"
  
  # Augmentation parameters for train set
  augmentation:
    horizontal_flip_p: 0.5
    shift_scale_rotate_p: 0.5
    shift_limit: 0.1
    scale_limit: 0.2
    rotate_limit: 15
    brightness_contrast_p: 0.5
    brightness_limit: 0.3
    contrast_limit: 0.3
    blur_p: 0.3
    noise_p: 0.3
    hue_saturation_p: 0.5
    cutout_p: 0.3

# Model settings
model:
  name: "FasterRCNN"
  backbone: "resnet50"
  pretrained: true
  num_classes: 61  # 60 classes + 1 background

# Training settings
training:
  num_epochs: 50
  device: "cuda"
  
  # Optimizer
  optimizer:
    type: "sgd"
    lr: 0.005
    momentum: 0.9
    weight_decay: 0.0005
  
  # Scheduler
  scheduler:
    type: "step_lr"
    step_size: 10
    gamma: 0.1
  
  # Checkpointing
  save_dir: "./models/checkpoints"
  save_best_only: true
  
  # Validation
  val_frequency: 1  # Validate every N epochs
  
  # Early stopping
  patience: 10

# MLflow settings
mlflow:
  tracking_uri: "./mlruns"
  experiment_name: "taco-object-detection"
  log_model: true
  log_artifacts: true
